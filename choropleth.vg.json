{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "title": "New Car Sales by State in Australia",
  "width": 600,
  "height": 600,
  "data": {
    "url": "https://raw.githubusercontent.com/nbetro5/fit3179-dv2/main/australian-states.json",
    "format": {"type": "json", "property": "features"}
  },
      "params": [
    {
      "name": "selectedYear",
      "value": 2025,
      "bind": {
        "input": "range", "min": 2020, "max": 2025, "step": 1
      }
    }
  ],
  "transform": [
    {
      "lookup": "properties.STATE_NAME",
      "from": {
        "data": {
          "url": "https://raw.githubusercontent.com/nbetro5/fit3179-dv2/main/testdatastate.csv",
          "format": {"type": "csv"},
      "filter": "datum['Per 10000'] != null && datum.Year == selectedYear"
    }
        },
        "key": "State",
        "fields": ["Per 10000"]
      }
    }
  ],
  "projection": {"type": "albers",
  "rotate": [-132.8906, 0, 0],
  "center": [0, -27.4422],
  "parallels": [-39.2069, -15.6778],
  "scale": 1000},
  "mark": {"type": "geoshape"},
    "encoding": {
    "color": {
    "field": "Per 10000",
    "type": "quantitative",
    "scale": {"type": "linear", "range": ["#edf8e9","#bae4b3","#74c476","#31a354","#006d2c"]}
    },
    "tooltip": [
    {"field": "properties.STATE_NAME", "type": "nominal", "title":
    "State"},
    {"field": "Per 10000", "type": "quantitative", "title": "Sales per 10000 People"}
    ]
    }
  }
